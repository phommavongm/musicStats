---
title: "musicStats: A Simple S3 Music Analysis Package"
author: "Michael Phommavong"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{musicStats Overview}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignletteEncoding{UTF-8}
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
library(musicStats)
library(ggplot2)

```


## Introduction
The **musicStats** package provides a simple S3 object system for representing music tracks and playlists.\
It includes tools to:\
- Represent music tracks with metadata\
- Build playlists containing multiple tracks\
- Compute playlist statistics (average BPM, total duration)\
- Visualize track-level statistics\
- Load an example dataset\
This vignette demonstrates how to work with the package from start to finish.\


## Creating Track Objects
A single track is represented using the track() constructor:
```{r}
t1 <- track("Dancing in the Dark", "Bruce Springsteen", duration = 232, bpm = 148)
t1

```

Each track has:\
- title\
- artist\
- duration (seconds)\
- bpm (beats per minute)\


## Creating a Playlist
You can start an empty playlist:
```{r}
pl <- playlist()
pl

```

Add tracks to it:
```{r}
t2 <- track("Blinding Lights", "The Weeknd", duration = 200, bpm = 171)
t3 <- track("Billie Jean", "Michael Jackson", duration = 294, bpm = 117)

pl <- add_track(pl, t1)
pl <- add_track(pl, t2)
pl <- add_track(pl, t3)

length(pl)

```

## Viewing Tracks in the Playlist
```{r}
pl$tracks

```

## Playlist Statistics
```{r}
avg_bpm(pl)

total_duration(pl)

total_duration(pl) / 60

plot(pl)

```


## Example Dataset
This package contains an example dataset
```{r}
# Load it with:
path <- system.file("extdata", "example_tracks.csv", package = "musicStats")
tracks <- read.csv(path)

# Convert to track objects
track_list <- apply(tracks, 1, function(row) {
  track(row["title"], row["artist"], row["duration"], row["bpm"])
})

example_playlist <- playlist(track_list)

# Plot only the first 10 tracks
example_playlist_10 <- playlist(example_playlist$tracks[1:10])
plot(example_playlist_10)

```

## Conclusion
The **musicStats** package provides a simple but powerful illustration of:\
- S3 object design in R\
- Writing clean constructors and methods\
- Creating statistical helper functions\
- Using ggplot2 for visualizations\
- Building a complete R package with documentation and vignettes\
